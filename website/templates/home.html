{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}  

   <!-- Main Container -->
<section class="main">
    <div class="container">
      <div class="row align-items-center">
        <!-- Image on the Left -->
        <div class="col-md-6 img-txt image-side">
          <img src="{{ url_for('static', filename='images/homepage-family.png') }}" alt="Happy Family with Dog"/>
        </div>

        <!-- Text on the Right -->
        <div class="col-md-6 img-txt text-side">
          <h1>HAPPY PET,<br>HAPPY HOME!</h1>
          <p>
            Where Love and Paws meet
            <img src="{{ url_for('static', filename='images/paw.png') }}" alt="paw icon" class="paw-icon"/>
          </p>
 {% if current_user.is_authenticated %}
 <a href="/browse" class="get-started-btn">
      Browse Pets
      <img src="{{ url_for('static', filename='images/white paw.png') }}" alt="paw icon" class="paw-icon"/>
    </a>
  {% else %}

          <a href="/login" class="get-started-btn">
    Sign In
    <img src="{{ url_for('static', filename='images/white paw.png') }}" alt="paw icon" class="paw-icon"/>
</a>
             {% endif %}
        </div>

      </div>
    </div>
</section>
  

  <!-- Pets Available for Adoption -->
  <section class="pets-available">
    <div class="section-header">
      <h2>Pets available for adoption...â€º </h2>
    </div>
    <div class="pets-slideshow">
    <div class="pets-list">
       {% for card in [
                {'image': 'bengalcat.jpeg', 'name': 'Nala'},
                {'image': 'jake.jpeg', 'name': 'Jake'},
                {'image': 'thor.jpeg', 'name': 'Thor'},
                {'image': 'biscuit.jpeg', 'name': 'Biscuit'},
                {'image': 'grey cat.jpeg', 'name': 'Poseidon'},
                {'image': 'snow.jpeg', 'name': 'Snow'},
                {'image': 'klaus.jpeg', 'name': 'Klaus'},
                {'image': 'Frame 10.png', 'name': 'Mika'},
                {'image': 'owl.png', 'name': 'Atlas'}
            ] %}
            <div class="pet-card">
                <img src="{{ url_for('static', filename='images/' + card.image) }}" alt="{{ card.name }}">
                <p class="pet-name">{{ card.name }}</p>
            </div>
            {% endfor %}
        </div>
        <a class="prev">&#10094;</a>
        <a class="next">&#10095;</a>
    </div>
  </section>
  
  <!-- Our Team Section -->
  <section class="team">
    <h2>Our team</h2>
    <div class="team-members">
      <div class="team-member">Adaure</div>
      <div class="team-member">Hawau</div>
      <div class="team-member">Rifqa</div>
      <div class="team-member">Moria</div>
      <div class="team-member">Doreen</div>
    </div>

  </section>
  
  <script>
document.addEventListener('DOMContentLoaded', function() {
    const slideList = document.querySelector('.pets-list');
    const cards = document.querySelectorAll('.pet-card');
    const prevButton = document.querySelector('.prev');
    const nextButton = document.querySelector('.next');

    // Clone cards for infinite effect
    cards.forEach(card => {
        const clone = card.cloneNode(true);
        slideList.appendChild(clone);
    });

    let position = 0;
    const cardWidth = cards[0].offsetWidth + 20; // card width + gap
    const totalCards = cards.length;
    let isTransitioning = false;

    function moveSlide(direction) {
        if (isTransitioning) return;
        isTransitioning = true;

        position += direction * cardWidth;
        const maxPosition = totalCards * cardWidth;

        // Apply smooth transition
        slideList.style.transition = 'transform 0.5s ease-in-out';
        slideList.style.transform = `translateX(-${position}px)`;

        // Reset position when reaching the end or beginning
        if (position >= maxPosition) {
            setTimeout(() => {
                slideList.style.transition = 'none';
                position = 0;
                slideList.style.transform = `translateX(0)`;
                isTransitioning = false;
            }, 500);
        } else if (position < 0) {
            setTimeout(() => {
                slideList.style.transition = 'none';
                position = maxPosition - cardWidth;
                slideList.style.transform = `translateX(-${position}px)`;
                isTransitioning = false;
            }, 500);
        } else {
            setTimeout(() => {
                isTransitioning = false;
            }, 500);
        }
    }

    // Button handlers
    nextButton.addEventListener('click', () => {
        if (!isTransitioning) moveSlide(1);
    });

    prevButton.addEventListener('click', () => {
        if (!isTransitioning) moveSlide(-1);
    });

    // Auto slide
    let autoSlideInterval = setInterval(() => moveSlide(1), 5000);

    // Pause on hover
    slideList.addEventListener('mouseenter', () => {
        clearInterval(autoSlideInterval);
    });

    slideList.addEventListener('mouseleave', () => {
        autoSlideInterval = setInterval(() => moveSlide(1), 5000);
    });
});
</script>
{% endblock %}
